{% extends "layouts/base.html" %}

{% block title %} Results {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

{% load urlparams %}

<main>
        <!-- Hero -->
        <nav class="navbar fixed-top navbar-dark bg-dark">
          <div class="container-fluid">
            <a class="navbar-brand" href="{% url 'home' %}">CMAI Web Knowledge Base</a>
            <form class="d-flex" action="{% url 'search_results' %}?search_type=Publications" method="post" enctype='multipart/form-data'>
                {% csrf_token %}
              <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" name='search-box'>
              <button class="btn btn btn-outline-success" type="submit">Search</button>
            </form>
          </div>
        </nav>
        <section class="section-header">
<!--            <form action="">-->
            <div class="container-fluid">
              <div class="row" style="column-gap:40px;">
                      {% include 'sidebar.html' with form=form summary=summary search_query=search_query search_type=search_type %}

                <div class="col" id="main">
                  <h1> Publications Results for "{{search_query}}"</h1>
                    <h3>Showing results {{start}} - {{end}} </h3>
                  {% include 'publications_results_table.html' with publications=results total_records=total_records %}
                </div>
                <nav aria-label="...">
                  <ul class="pagination justify-content-center">
                    <li class="page-item {% if current == first %} disabled {% endif %}">
                      <a class="page-link" href="{% url 'search_results' %}{% urlparams query=search_query page_index=previous search_type='Publications' %}"><span class="page-link">Previous</span></a>
                    </li>
                      {% for page in pages %}
                            <li class="page-item {% if page == current %} active {% endif %}"><a class="page-link" href="{% url 'search_results' %}{% urlparams query=search_query page_index=page search_type='Publications' %}"><span class="page-link">{{page}}</span></a></li>
                      {% endfor %}
                    <li class="page-item {% if current == last %} disabled {% endif %}">
                      <a class="page-link" href="{% url 'search_results' %}{% urlparams query=search_query page_index=next search_type='Publications' %}"><span class="page-link">Next</span></a>
                    </li>
                  </ul>
                </nav>
              </div>
            </div>
<!--            </form>-->
            <!-- Page content wrapper-->
        <!-- Bootstrap core JS-->
        </section>
    </main>


{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}{% endblock javascripts %}
